(function(e){e.fn.html5audio=function(f){function c(){var a=0==h.find("div[class='fontMeasure']").length?e("<div/>").addClass("fontMeasure").appendTo(h):h.find("div[class='fontMeasure']");xa=new apTextScroller;xa.init(a,nb,ge,"left",f.scrollSeparator,f.scrollSpeed)}function ia(a){if(p&&!x&&!fa){if(!Eb){if(Ka){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Eb=!0;Ra.on(ob,function(a){a:{var d;if(Ka){if(a.originalEvent.touches&&a.originalEvent.touches.length)d=a.originalEvent.touches; else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)d=a.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=a;a.preventDefault();pa(d)}}).on(pb,function(a){a:if(Eb){Eb=!1;Ra.off(ob).off(pb);var d;if(Ka){if(a.originalEvent.touches&&a.originalEvent.touches.length)d=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)d=a.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=a; a.preventDefault();pa(d)}})}return!1}}function pa(a){"horizontal"==Fb?D=Math.max(0,Math.min(1,(a.pageX-qb.offset().left)/ja)):(D=Math.max(0,Math.min(1,(a.pageY-qb.offset().top)/ja)),D=1-D);A()}function E(){if(!p||x)return!1;hc?(D=Dc,hc=!1):(Dc=D,D=0,hc=!0)}function A(){"horizontal"==Fb?ic.css("width",D*ja+"px"):ic.css("height",D*ja+"px");V&&("youtube"==aa?X?B&&B.setVolume(D):"undefined"!==typeof k(F)&&k(F).pb_setVolume(D):P?m&&(m.volume=D):"undefined"!==typeof k(u)&&k(u).pb_setVolume(D));0<D?h.find(".player_volume").find("img").attr("src", id):h.find(".player_volume").find("img").attr("src",jd);isMobile&&Gb&&(W&&clearTimeout(W),W=setTimeout(jc,kc))}function z(){Gb&&W&&clearTimeout(W);Na.css("display","block");ka.on("mousemove",Q).on("mouseout",n);Ra.on("mouseout",n)}function n(){Gb&&(W&&clearTimeout(W),W=setTimeout(jc,kc));Na.css("display","none");ka.off("mousemove",Q).off("mouseout",n);Ra.off("mouseout",n)}function Q(a){if("horizontal"==Fb){var b=a.pageX-qb.offset().left;if(!r(b))return!1;0>b?b=0:b>ja&&(b=ja);a=parseInt(a.pageX-ka.offset().left- Na.width()/2,10);Na.css("left",a+"px");b=Math.max(0,Math.min(1,b/ja));b=parseInt(100*b,10)}else{b=a.pageY-qb.offset().top;if(!r(b))return!1;0>b?b=0:b>ja&&(b=ja);a=parseInt(b-Na.height()/2,10);Na.css("top",a+he+"px");b=Math.max(0,Math.min(1,b/ja));b=parseInt(100*(1-b),10)}Na.find("p").html(b+" %")}function ba(a){if(p&&!x&&V&&!Eb&&!lc){if(!fa){if(Ka){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();fa=!0;Ra.on(ob,function(a){a:{var d;if(Ka){if(a.originalEvent.touches&& a.originalEvent.touches.length)d=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)d=a.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=a;a.preventDefault();qa(d,a)}}).on(pb,function(a){ga(a)})}return!1}}function ga(a){if(fa){fa=!1;Ra.off(ob).off(pb);var b;if(Ka){if(a.originalEvent.touches&&a.originalEvent.touches.length)b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b= a.originalEvent.changedTouches;else return!1;if(1<b.length)return!1;b=b[0]}else b=a;a.preventDefault();qa(b,a)}if(ca)var d=setTimeout(function(){d&&clearTimeout(d);Ec=!1},500);return!1}function qa(a,b){if(!ca){db=a.pageX-mc.offset().left;0>db?db=0:db>K&&(db=K);ya.width(db);var d=Math.max(0,Math.min(1,db/K))}else if(za){if(Fc(b)){if(Gc||kd>ld-ie)return!1;fa||(Hb(!0),L.clearRect(0,0,la,ra),sa(ta),R());return!1}if(!Gc)return!1;Ec=!0;var d=a.pageX-Oa.offset().left-la/2,g=a.pageY-Oa.offset().top-ra/2, d=Math.atan2(g,d);d>-1*Math.PI&&d<-.5*Math.PI&&(d=2*Math.PI+d);ta=d=Math.max(0,Math.min((d+Math.PI/2)/2*Math.PI*10))/100;L.clearRect(0,0,la,ra);sa(ta);R()}if(!r(d))return!1;Ib=ta;ua(d)}function ua(a){"youtube"==aa?X?(a=(a*B.getDuration()).toFixed(1),r(a)&&B.seek(a)):"undefined"!==typeof k(F)&&k(F).pb_seek(a):P?m&&m.seekable&&0<m.seekable.length&&(!je||isMobile?m.currentTime=a*m.duration:a*m.duration>=m.buffered.end(0)-5?m.currentTime=m.buffered.end(0)-5:m.currentTime=a*m.duration):"undefined"!==typeof k(u)&& k(u).pb_seek(a)}function Aa(){V&&(Ba.css("display","block"),$a.on("mousemove",Sa).on("mouseout",ma),Ra.on("mouseout",ma))}function ma(){V&&(Ba.css("display","none"),$a.off("mousemove",Sa).off("mouseout",ma),Ra.off("mouseout",ma))}function Sa(a){if(!ca){var b=a.pageX-mc.offset().left;if(!r(b))return!1;0>b?b=0:b>K&&(b=K);a=parseInt(a.pageX-$a.offset().left-Ba.width()/2,10);Ba.css("left",a+"px");b=Math.max(0,Math.min(1,b/K))}else if(za){if(Fc(a))return Ba.css("display","none"),!1;b=a.pageX-Oa.offset().left; a=a.pageY-Oa.offset().top;a=Math.atan2(a-ra/2,b-la/2);a>-1*Math.PI&&a<-.5*Math.PI&&(a=2*Math.PI+a);b=Math.max(0,Math.min((a+Math.PI/2)/2*Math.PI*10))/100;Ba.css("display","block")}if(!r(b))return!1;eb(b)}function eb(a){if(!r(a))return!1;var b,d;"youtube"==aa?X?(d=B.getDuration(),b=a*d):"undefined"!==typeof k(F)&&(d=k(F).pb_getFlashDuration(),b=a*d):P?m&&(d=m.duration,b=a*d):"undefined"!==typeof k(u)&&(d=k(u).pb_getFlashDuration(),b=a*d);if(r(b)&&r(d))Ba.find("p").html(Jb(b)+md+Kb(d));else return!1} function sa(a){L.beginPath();L.arc(la/2,ra/2,Hc-Lb/2,-nc,nd*a-nc,!1);L.strokeStyle=Ic;L.lineCap="butt";L.lineWidth=Lb;L.stroke()}function Mb(a){ab.beginPath();ab.arc(la/2,ra/2,Hc-Lb/2,-nc,nd*a-nc,!1);ab.strokeStyle=ke;ab.lineCap="butt";ab.lineWidth=Lb;ab.stroke()}function R(){if(G)a=62,b=57,L.fillStyle=Ic,L.fillRect(a,b,14,45),L.fillRect(a+23,b,14,45);else{var a=65,b=57,d=65-a,g=102-b,l=Math.atan2(g,d)-Math.PI/3,g=Math.sqrt(d*d+g*g),d=Math.cos(l)*g+a,l=Math.sin(l)*g+b;L.beginPath();L.fillStyle=Ic; L.moveTo(a,b);L.lineTo(65,102);L.lineTo(d,l);L.fill()}}function Fc(a){var b;if(Ka){if(a.originalEvent.touches&&a.originalEvent.touches.length)a=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)a=a.originalEvent.changedTouches;else return!1;if(1<a.length)return!1;b=a[0]}else b=a;a=b.pageX-Oa.offset().left;b=b.pageY-Oa.offset().top;var d=la/2,g=ra/2;kd=Math.sqrt((a-d)*(a-d)+(b-g)*(b-g));return Math.sqrt((a-d)*(a-d)+(b-g)*(b-g))<ld}function Jc(a){if(0!= h.find(".componentPlaylist").length)if(Y)"vertical"==Nb?Pa.outerHeight(!0)>=rb.height()?(Y.reinitialise(),a&&(Y.scrollToY(0),e(".jspPane").css("top","0px"))):(Y.destroy(),Y=null):(Y.reinitialise(),a&&(Y.scrollToX(0),e(".jspPane").css("left","0px")));else if(a=h.find(".componentPlaylist"),Y=a.jScrollPane().data().jsp,a.on("jsp-initialised",function(a,d){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"==Nb&&!isMobile)a.on("mousewheel",le)}function le(a,b,d,g){if(!p||x)return!1;Y&&Y.scrollByX(100*(0< b?-1:1));return!1}function Hb(a){if(G){if("youtube"==aa){if(!Ta)return!1;X?B.togglePlayback():("undefined"!==typeof k(F)&&k(F).pb_togglePlayback(),V=!0)}else P?m&&m.pause():"undefined"!==typeof k(u)&&k(u).pb_pause();G=!1;La("off")}else{if("youtube"==aa){if(!Ta)return!1;X?isMobile?!Ob&&da?(p=!1,oc("on")):B.togglePlayback():B.togglePlayback():("undefined"!==typeof k(F)&&k(F).pb_togglePlayback(),V=!0)}else P?m&&m.play():"undefined"!==typeof k(u)&&k(u).pb_play();G=!0;fb("off")}if(!a)return!1}function od(a){if(!p|| x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget);var b=a.attr("data-id");if(a.closest(".playlistItem").hasClass(Pb))return!1;da=!0;Qa();t.processPlaylistRequest(b);return!1}function me(a){if(!p||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("class").split(" ");if(-1!=e.inArray("controls_prev",a))da=!0,Qa(),t.advanceHandler(-1,!0);else if(-1!= e.inArray("controls_toggle",a)){if(!V)return;Hb()}else if(-1!=e.inArray("controls_next",a))da=!0,Qa(),t.advanceHandler(1,!0);else if(-1!=e.inArray("player_volume",a))isMobile?Gb?(W&&clearTimeout(W),Qb?(ka.css("display","none"),Qb=!1):(ka.css("display","block"),Qb=!0,W=setTimeout(jc,kc))):(E(),A()):(E(),A());else if(-1!=e.inArray("player_download",a)){if(!Ua)if(a=aa){var b=t.getCounter(),d=C[b].download,b=Kc(b,!1);a=pd(a,b,d);qd(a.name,a.path)}else v&&alert("Invalid data-type for file download function! Quitting."), Ua=!1}else-1!=e.inArray("player_loop",a)?(Ca?(h.find(".player_loop").find("img").attr("src",pc),Ca=!1):(h.find(".player_loop").find("img").attr("src",Rb),Ca=!0),t.setLooping(Ca)):-1!=e.inArray("player_shuffle",a)&&(Da?(h.find(".player_shuffle").find("img").attr("src",qc),Da=!1):(h.find(".player_shuffle").find("img").attr("src",Sb),Da=!0),t.setRandom(Da));return!1}function ne(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class").split(" "), -1!=e.inArray("controls_prev",a)?h.find(".controls_prev").find("img").attr("src",oe):-1!=e.inArray("controls_toggle",a)?G?fb("on"):La("on"):-1!=e.inArray("controls_next",a)?h.find(".controls_next").find("img").attr("src",pe):-1!=e.inArray("player_volume",a)?0<D?h.find(".player_volume").find("img").attr("src",qe):h.find(".player_volume").find("img").attr("src",re):-1!=e.inArray("player_download",a)?h.find(".player_download").find("img").attr("src",se):-1!=e.inArray("player_loop",a)?Ca?h.find(".player_loop").find("img").attr("src", pc):h.find(".player_loop").find("img").attr("src",Rb):-1!=e.inArray("player_shuffle",a)&&(Da?h.find(".player_shuffle").find("img").attr("src",qc):h.find(".player_shuffle").find("img").attr("src",Sb)),!1}function te(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class").split(" "),-1!=e.inArray("controls_prev",a)?h.find(".controls_prev").find("img").attr("src",ue):-1!=e.inArray("controls_toggle",a)?G?fb("off"):La("off"): -1!=e.inArray("controls_next",a)?h.find(".controls_next").find("img").attr("src",ve):-1!=e.inArray("player_volume",a)?0<D?h.find(".player_volume").find("img").attr("src",id):h.find(".player_volume").find("img").attr("src",jd):-1!=e.inArray("player_download",a)?h.find(".player_download").find("img").attr("src",we):-1!=e.inArray("player_loop",a)?Ca?h.find(".player_loop").find("img").attr("src",Rb):h.find(".player_loop").find("img").attr("src",pc):-1!=e.inArray("player_shuffle",a)&&(Da?h.find(".player_shuffle").find("img").attr("src", Sb):h.find(".player_shuffle").find("img").attr("src",qc)),!1}function Qa(){if(!va&&-1!=t.getCounter()){var a=e(Va[t.getCounter()]);if(a&&a.hasClass("playlistSelected")){var b=a.attr("data-id");a.removeClass("playlistSelected").addClass("playlistNonSelected");"undefined"!==typeof playlistItemEnabled&&playlistItemEnabled(N,M,a,b)}}}function rd(){if(!va){var a=e(Va[t.getCounter()]);if(a&&a.hasClass("playlistNonSelected")){var b=a.attr("data-id");a.removeClass("playlistNonSelected").addClass("playlistSelected"); "undefined"!==typeof playlistItemDisabled&&playlistItemDisabled(N,M,a,b)}}}function Lc(){var a=f.activeItem;r(a)&&-1!=a?(0>a?a=0:a>H-1&&(a=H-1),t.setCounter(a,!1)):da=!0}function sd(){w&&-1!=t.getCounter()&&(Tb(),td(),Qa())}function Ub(){Tb();td();var a=0,b;for(a;a<H;a++)b=e(Va[a]).off("click",od),ud&&!isMobile&&b.off("mouseenter").off("mouseleave");w&&(w.children().each(function(){var a=e(this);a.data("hap_wrap_player")&&a.data("hap_wrap_player").destroyPlaylist()}),w.empty(),w=null);Pa.empty(); va=Vb=!1;rc=O=q=null;sb=tb=Wb=!1;ub=null;t.reSetCounter();C=[];Va=[];S=[];Y&&Y.reinitialise()}function Tb(){sc&&(X?B&&B.stop():"undefined"!==typeof k(F)&&k(F).pb_dispose(),sc=!1);P?(ha&&clearInterval(ha),m&&(m.pause(),m.src=""),Xb&&Xb.off("ended pause play canplay canplaythrough loadedmetadata")):"undefined"!==typeof k(u)&&k(u).pb_dispose();Mc();rc?tc.css("display","block"):tc.css("display","none");Ib=null;Nc=V=G=lc=!1;Oc||(Yb=void 0)}function vd(a){if("undefined"===typeof a)return v&&alert("setPlaylist method requires data parameter. loadPlaylist failed."), !1;if("undefined"===typeof a.hidden)return v&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var b=xe(a.hidden);if("undefined"===typeof a.id)return v&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),!1;a=a.id;x=!0;wd||(wd=!0);xd();Pa.css("opacity",0);w&&Ub();Vb=!1;va=b;yd&&isIE?(b=e(bb.find(a).css("display","block").clone().wrap("<p>").parent().html()),e(bb.find(a).css("display","none"))):(b=bb.find(a).css("display","block").clone(), bb.find(a).css("display","none"));b.css("fontSize",0);if(0==b.length)return v&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'),Pc(),!1;if(va)vb.empty(),b.appendTo(vb),Ea=0,sb=tb=gb=!0,w=Qc;else{if(!Y&&0==Pa.length)return v&&alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;b.appendTo(Pa);w=b}C=[];Va=[];S=[];I=[];b.find("li[class*='playlistItem']").each(function(){I.push(e(this))}); T()}function T(){I.length?ye():ze()}function ye(){uc=ea=U=O=na=null;Rc=!1;var a=I[0],b=a.attr("data-type").toLowerCase(),d=a.attr("data-path"),g=a.hasClass(zd);y=[];a.hasClass(Ad)&&(Rc=!0);void 0==a.attr("data-plink")||J(a.attr("data-plink"))||(na=a.attr("data-plink"));void 0!=a.attr("data-dlink")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?J(a.attr("data-dlink"))||(O=a.attr("data-dlink")):O=J(a.attr("data-dlink"))?!0:a.attr("data-dlink"));void 0!=a.attr("data-download")&& ("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?J(a.attr("data-download"))||(U=a.attr("data-download")):U=J(a.attr("data-download"))?!0:a.attr("data-download"));void 0==a.attr("data-thumb")||J(a.attr("data-thumb"))||(ea=a.attr("data-thumb"));J(e.trim(a.html()))||(uc=a.html());if(g)q=a,I.shift(),T();else if("local"==b)q=a,I.shift(),T();else if("soundcloud"==b)q=a.data("toremove","true"),Zb=0,vc(d);else if("podcast"==b)q=a.data("toremove","true"),g="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num="+ Ae+"&callback=?&q="+encodeURIComponent(d),e.ajax({type:"GET",url:g,dataType:"jsonp",cache:!1}).done(function(a){if(null==a.responseData)v&&alert("Playlist process failed, podcast: "+d),q&&"true"==q.data("toremove")&&q.remove(),I.shift(),T();else{if(ieBelow9){a=Be(a.responseData.xmlString);var b;e(a).find("item").each(function(){b=e(this);f={type:"podcast"};f.mp3=b.find("enclosure").attr("url");f.ogg="";f.title=b.find("title").text();0<b.find("media\\:thumbnail").length?b.find("media\\:thumbnail").attr("url")? f.thumb=b.find("media\\:thumbnail").attr("url"):ea&&(f.thumb=ea):ea&&(f.thumb=ea);na&&(f.url=na);O&&(f.dlink=O);U&&(f.download=U);y.push(f)})}else{Bd.html(a.responseData.xmlString);a=Bd.get(0).getElementsByTagName("item");var g=0,l=a.length,c,h,f;for(g;g<l;g++)c=a[g],void 0!=c.getElementsByTagName("enclosure")[0]&&(f={type:"podcast"},f.mp3=c.getElementsByTagName("enclosure")[0].getAttribute("url"),f.ogg="",void 0!=c.getElementsByTagName("itunes:duration")[0]&&(h=Ce(c.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue), f.length=parseInt(1E3*h,10)),void 0!=c.getElementsByTagName("media:thumbnail")[0]?void 0!=c.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?f.thumb=c.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):ea&&(f.thumb=ea):ea&&(f.thumb=ea),f.title=c.getElementsByTagName("title")[0].childNodes[0].nodeValue,na&&(f.url=na),O&&(f.dlink=O),U&&(f.download=U),y.push(f))}Wa()}}).fail(function(a,b,g){v&&alert("Parse feed error: "+a.responseText);v&&alert("Playlist process failed, podcast: "+ d);q&&"true"==q.data("toremove")&&q.remove();I.shift();T()});else if("folder"==b){q=a.data("toremove","true");var g=hap_source_path+"folder_parser.php",l=!0;void 0!=a.attr("data-subdirs")&&"false"==a.attr("data-subdirs")&&(l=!1);l={dir:d,subdirs:l};e.ajax({type:"GET",url:g,data:l,dataType:"json"}).done(function(a){De(a,"title");var b=0,d=a.length,g,l;Cd&&(cb=y.length?y.length-1:0);for(b;b<d;b++)if(g=a[b],l=g.path,l=l.replace(/\\'/g,"'"),l=l.replace(/\\"/g,'"'),l=l.replace(/\\0/g,"\x00"),path=l=l.replace(/\\\\/g, "\\"),l={type:"folder"},/.mp3/.test(path)){l.mp3=path;l.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var c=path.substr(0,path.lastIndexOf("."));title=/\//i.test(c)?c.substr(c.lastIndexOf("/")+1):c;title=title.split("_").join(" ");l.title=title;l.thumb=path.substr(0,path.lastIndexOf("."))+".jpg";l.size=parseInt(g.size,10);l.lastmod=parseInt(g.lastmod,10);na&&(l.url=na);O&&(l.dlink=O);U&&(l.download=U);ea&&(l.thumb=ea);y.push(l)}y.length&&Cd?Dd():Wa()}).fail(function(a,b,g){v&&alert("Read folder error! Make sure you run this online or on local server!"); v&&alert("Playlist process failed, folder: "+d);q&&"true"==q.data("toremove")&&q.remove();I.shift();T()})}else if("xml"==b){q=a;var g=hap_source_path+d,c,h=[];e.ajax({type:"GET",url:g,dataType:"html",cache:!1}).done(function(b){I.shift();e(b).find("li[class='playlistItem']").each(function(){c=Sc(e(this));q?q.after(e(c)):0<w.children().size()?e(c).prependTo(w):e(c).appendTo(w);q=e(c);h.push(e(c))});b=0;var d=h.length;h.reverse();for(b;b<d;b++)I.unshift(h[b]);h=null;a.remove();T()}).fail(function(a, b,g){v&&alert("Playlist process failed, xml: "+d);q&&q.remove();I.shift();T()})}else if("database_data"==b||"database_html"==b)if(void 0==a.attr("data-table")||J(a.attr("data-table")))v&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+d)),I.shift(),T();else{var f=l=null,k=null;void 0==a.attr("data-limit")||J(a.attr("data-limit"))||(l=parseInt(a.attr("data-limit"),10));void 0==a.attr("data-range")||J(a.attr("data-range"))||(g=a.attr("data-range").split(","),2==g.length&& (f=g[0],k=g[1]));q=a;g=hap_source_path+"includes/database.php";h=[];l={db_name:d,db_table:a.attr("data-table"),db_type:b,limit:l,range_from:f,range_to:k};e.ajax({type:"POST",url:g,data:l}).done(function(g){if(-1<g.indexOf("Database information missing!")||-1<g.indexOf("Db connection failed")||-1<g.indexOf("Db selection failed")||-1<g.indexOf("Db query failed"))v&&(alert(g),alert("Playlist process failed, database query: "+d)),q&&q.remove(),I.shift();else{I.shift();g=e.parseJSON(g);var l=0,f=g.length, k;for(l;l<f;l++){k=g[l];if("database_data"==b)if(k.type&&k.mp3||k.path)c=Ed(k);else continue;else if(k.path)c=Sc(k.path);else continue;q?q.after(e(c)):0<w.children().size()?e(c).prependTo(w):e(c).appendTo(w);q=e(c);h.push(e(c))}l=0;f=h.length;h.reverse();for(l;l<f;l++)I.unshift(h[l]);h=null;a.remove()}T()}).fail(function(a,b,g){v&&alert("Playlist process failed, database query: "+d);q&&q.remove();I.shift();T()})}else"youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?(q=a.data("toremove", "true"),Fd.setData({type:b,path:d})):"ofm_single"==b?(q=a.data("toremove","true"),Xa=[],Xa.push({id:d,type:b}),$b()):"ofm_playlist"==b||"ofm_project"==b?(q=a.data("toremove","true"),Tc=b,wc=d,Xa=[],wb=1,Gd()):(v&&alert("Invalid playlist data-type attribute!"),I.shift(),T())}function Wa(){if(y.length){var a,b,d=0,g=y.length,l,c;for(d;d<g;d++)l=y[d],a=e('<li class="playlistItem" data-type="'+l.type+'"data-mp3="'+l.mp3+'" data-ogg="'+l.ogg+'" data-thumb="'+l.thumb+'"></li>'),c=l.mp3,/\.(mp3)$/i.test(l.mp3)|| (c+=".mp3"),Rc&&a.addClass(Ad),l.url&&a.attr("data-plink",l.url),l.dlink&&(1!=l.dlink&&"true"!=l.dlink?a.attr("data-dlink",l.dlink):a.attr("data-dlink",c)),l.download&&(1!=l.download&&"true"!=l.download?a.attr("data-download",l.download):a.attr("data-download",c)),l.title&&a.attr("data-title",l.title),l.thumb&&("//"==l.thumb.substr(0,2)&&(l.thumb="http:"+l.thumb),a.attr("data-thumb",l.thumb)),l.length&&a.attr("data-length",l.length),"title"==Ya?b=e('<a class="playlistNonSelected" href="#">'+l.title+ "</a>").appendTo(a):"thumb"==Ya?b=e('<a class="playlistNonSelected" href="#"><img src="'+l.thumb+'" alt="thumb"/></a>').appendTo(a):"all"==Ya&&(b=e('<a class="playlistNonSelected" href="#"></a>').appendTo(a),e('<span class="hap_thumb"><img src="'+l.thumb+'" alt="thumb"/></span>').appendTo(b),e('<span class="hap_title"><p>'+l.title+"</p></span>").appendTo(b)),uc&&b.after(uc),q?(q.after(a),"true"==q.data("toremove")&&q.remove()):a.appendTo(w),q=a}I.shift();T()}function ze(){if(Wb||tb){var a=0;q=null; var b;vb.find("li[class*='playlistItem']").each(function(){b=e(this);q?q.after(b):gb?b.appendTo(w):w.children().eq(Ea).before(b);q=b;a++});vb.empty()}xc();Pa.css("opacity",1);p||Hd();q=null;x=!1;Pc();if(0<H){if(Wb||tb){var d=t.getCounter();t.setPlaylistItems(H,!1);Ea<=d&&(gb||t.reSetCounter(d+a));sb&&(sb=!1,Lc())}else t.setPlaylistItems(H),Lc();hb&&Za()}tb=Wb=!1;0==H&&"undefined"!==typeof playlistEmpty&&playlistEmpty(N,M);"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(N, M);Vb=!0}function xc(){C=[];S=[];Va=[];if(0==w.length)return v&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),!1;var a=0,b,d,g=w.find("li"),l=g.length,c,f,h,k,n,m,q,r,u,ia;ac=0;for(a;a<l;a++){d=e(g[a]).addClass(zd);S.push(d);Uc&&d.addClass(Pb);ac="horizontal"==Nb?ac+d.outerWidth(!0):ac+d.outerHeight(!0);b=d.find("a[class=playlistNonSelected]");0==b.length&&(b=d.find("a[class=playlistSelected]")); b.off().on("click",od).attr("data-id",a);Va.push(b);if(ud&&!isMobile)b.on("mouseenter",function(a){if(!p||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("data-id");var b=e(Va[a]),d=!1;t.getCounter()==a&&(d=!0);"undefined"!==typeof playlistItemRollover&&playlistItemRollover(N,M,b,a,d);return!1}).on("mouseleave",function(a){if(!p||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(); a=e(a.currentTarget).attr("data-id");var b=e(Va[a]),d=!1;t.getCounter()==a&&(d=!0);"undefined"!==typeof playlistItemRollout&&playlistItemRollout(N,M,b,a,d);return!1});c="";void 0!=d.attr("data-title")?c=d.attr("data-title"):"title"==Ya?c=b.html():"thumb"!=Ya&&"all"==Ya&&(c=b.find("span[class=hap_title]").find("p").html());Vc&&(f=Wc(a)+Xc+c,b.html(f));d=e(S[a]).attr({"data-id":a,"data-title":c});h=f=m=n="";k=void 0;ia=u=r=q=null;void 0!=d.attr("data-mp3")&&(n=d.attr("data-mp3"));void 0!=d.attr("data-ogg")&& (m=d.attr("data-ogg"));void 0!=d.attr("data-type")&&(f=d.attr("data-type"));void 0!=d.attr("data-origtype")&&(h=d.attr("data-origtype"));void 0==d.attr("data-length")||J(d.attr("data-length"))||(k=d.attr("data-length"));"youtube"==f?(void 0==d.attr("data-download")||J(d.attr("data-download"))||(q=d.attr("data-download")),void 0==d.attr("data-dlink")||J(d.attr("data-dlink"))||(r=d.attr("data-dlink"))):(void 0!=d.attr("data-download")&&(q=J(d.attr("data-download"))||"true"==d.attr("data-download")? n:d.attr("data-download")),void 0!=d.attr("data-dlink")&&(r=J(d.attr("data-dlink"))||"true"==d.attr("data-dlink")?n:d.attr("data-dlink")));void 0==d.attr("data-plink")||J(d.attr("data-plink"))||(u=d.attr("data-plink"));void 0==d.attr("data-thumb")||J(d.attr("data-thumb"))||(ia=d.attr("data-thumb"));va||(u&&0==d.find("a[class=plink]").length&&(u=e('<a class="plink" href="'+u+'" target="_blank"><img src="'+Id+'" alt="purchase"/></a>'),b.after(u)),r&&0==d.find("a[class=dlink]").length&&(r=e('<a class="dlink" href="#" data-dlink="'+ r+'"><img src="'+Jd+'" alt="download"/></a>'),b.after(r),J(d.attr("data-dlink"))),Kd&&0==d.find("a[class=premove]").length&&(d=e('<a class="premove" href="#"><img src="'+Ee+'" alt="remove"/></a>'),b.after(d)));C.push({id:a,type:f,origtype:h,title:c,mp3:n,ogg:m,length:k,download:q,thumb:ia})}g=null;H=C.length;va||(Fe(),Ge&&rb.length&&!w.hasClass("ui-sortable")&&(w.on("sortstart",function(a,b){b.helper.css("margin-top",Ld.scrollTop())}),w.on("sortbeforestop",function(a,b){b.helper.css("margin-top", 0)}),w.sortable({cursor:"move",update:function(a,b){xc();0<H&&t.setPlaylistItems(H);var d=Pa.find("a[class=playlistSelected]").attr("data-id");d&&(t.reSetCounter(d),hb&&Za());1==H&&Lc()},receive:function(a,b){"undefined"!==typeof dropReceive&&dropReceive(N,M)}})),Md&&("horizontal"==Nb&&Pa.width(ac),Jc(!0)));return!0}function Hd(){p=!0;x=!1;Pc();setTimeout(function(){Nd();"horizontal"==Fb?(ja=qb.width(),ic.css("width",D*ja+"px")):(ja=qb.height(),ic.css("height",D*ja+"px"));A()},100);"undefined"!== typeof audioPlayerSetupDone&&audioPlayerSetupDone(N,M)}function Fe(){var a=Ka?ib:"click";h.find("a[class=dlink]").off().on(a,function(a){a.preventDefault();if(Ua)return!1;var d=e(this),g=d.closest(".playlistItem"),l=g.attr("data-id");if(g.hasClass(Pb))return!1;if(void 0==g.attr("data-type")||J(g.attr("data-type")))return v&&alert("Invalid data-type for file download function! Quitting."),Ua=!1;a=g.attr("data-type");void 0==g.attr("data-origtype")||J(g.attr("data-origtype"))||(a=g.attr("data-origtype")); void 0==d.attr("data-dlink")||J(d.attr("data-dlink"))||(d=d.attr("data-dlink"),l=Kc(l,!1),a=pd(a,l,d),qd(a.name,a.path))});h.find("a[class=plink]").off().on("click",function(a){if(e(this).closest(".playlistItem").hasClass(Pb))return!1});if(Kd)h.find("a[class=premove]").off().on("click",function(a){a.preventDefault();a=e(this).closest(".playlistItem");var d=parseInt(a.attr("data-id"),10);if(a.hasClass(Pb))return!1;N.removeTrack(d)})}function pd(a,b,d){"local"==a||"folder"==a?(d.indexOf("\\")&&(d=d.replace(/\\/g, "/")),d.match(/^http([s]?):\/\/.*/)||(a=window.location.href,a=a.substr(0,a.lastIndexOf("/")+1),/^\.\.\//i.test(d)&&(d=d.substr(3),"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.lastIndexOf("/"))),a=a.substr(0,a.lastIndexOf("/")+1)),d=a+d),isMobile||(b=0<d.lastIndexOf("/")?d.substr(d.lastIndexOf("/")+1):d)):"soundcloud"==a&&(d=d.replace(/\/stream\\?/,"/download").replace(/\.mp3/,""));b=b.replace(/[^A-Z0-9\-\_\.]+/ig,"_");/\.(mp3)$/i.test(b)||(b+=".mp3");return{name:b,path:d}}function qd(a,b){if(isMobile)if(Ua= !0,He)Od||(Yc=Pd())&&(Od=!0),Yc?Qd(Yc,a,b):Ua=!1;else{var d=Pd();d?Qd(d,a,b):Ua=!1}else Ie.attr("src",hap_source_path+"dl.php?path="+b+"&name="+a)}function Qd(a,b,d){e.ajax({type:"POST",url:hap_source_path+"mail.php",data:"mail="+a+"&name="+b+"&path="+d}).done(function(a){Ua=!1}).fail(function(a,b,d){v&&alert("Send email error: "+a.responseText);Rd();Ua=!1});yc.css({marginTop:-yc.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500});bc&&clearTimeout(bc);bc=setTimeout(Rd,Je)} function Rd(){bc&&clearTimeout(bc);yc.stop().animate({opacity:0},{duration:500,complete:function(){yc.css("display","none")}})}function Pd(){for(var a=prompt("Please enter your email address where download link will be sent:"),b=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!b.test(a)||J(a))&&null!=a;)a=prompt("Please enter a valid email address:");return a}function Ke(){e(".hap_text_link").each(function(){var a=e(this),b=a.attr("href");"undefined"!==typeof b&&!1!==b&&-1<b.toLowerCase().indexOf(".mp3")&& a.prepend('<img class="play_link" src="'+zc+'"/>')});e(".hap_text_link, .hap_image_link").click(function(a){if(!p||x)return!1;a=e(this);var b=a.attr("href");if("undefined"===typeof b||!1===b)return!1;if(Yb&&Yb==b)return Hb();Qa();t.reSetCounter();Yb=b;Sd=a;Oc=!0;Fa&&Fa.attr("src",zc);a.hasClass("hap_text_link")&&(Fa=a.find("img").attr("src",Td));oa=Yb;xb=oa.substr(0,oa.lastIndexOf("."))+".ogg";da=!0;P||"undefined"!==typeof k(u)&&k(u).pb_setAutoplay(!0);Tb();Zc();return Oc=!1})}function $b(){Xa.length? Le(Xa.shift()):(0==y.length&&q&&"true"==q.data("toremove")&&q.remove(),y.length>cc&&(y=y.slice(0,cc)),Wa())}function Le(a){var b=a.id,d=a.type;e.ajax({url:"http://api.official.fm/tracks/"+b+"?fields=streaming,cover&api_version=2",dataType:"json",cache:!1}).done(function(a){var b={},c,e;a.track&&a.track.streaming&&a.track.streaming.http&&(a=a.track,b.type=d,b.length=a.duration?a.duration:null,b.mp3=a.streaming.http,b.ogg=a.streaming.http,c=a.artist?a.artist:"Official Fm artist",e=a.title?a.title:"Official Fm track", b.title=c+" - "+e,na&&(b.url=na),O&&(b.dlink=O),U&&(b.download=U),a.cover.urls.small?b.thumb=a.cover.urls.small:ea&&(b.thumb=ea),y.push(b));$b()}).fail(function(a,d,c){v&&alert("Playlist process failed, ofm: "+b);$b()})}function Ud(){1<$c?(wb+=1,wb<=$c&&Xa.length<cc?Gd():Xa.length?$b():(I.shift(),T())):Xa.length?$b():(0==y.length&&q&&"true"==q.data("toremove")&&q.remove(),I.shift(),T())}function Gd(){e.ajax({url:"ofm_playlist"==Tc?"http://api.official.fm/playlists/"+wc+"/tracks?api_version=2&page="+ wb+"":"http://api.official.fm/projects/"+wc+"/tracks?fields=cover&api_version=2&page="+wb+"",dataType:"json",cache:!1}).done(function(a){$c=a.total_pages;if(a.tracks&&a.tracks.length){var b=0,d=a.tracks.length,g;d>cc&&(d=cc);for(b;b<d;b++)g=a.tracks[b].track,g.url&&(g=g.url.substr(g.url.lastIndexOf("/")+1),g=g.substr(0,g.indexOf("?")),Xa.push({id:g,type:Tc}))}Ud()}).fail(function(a,b,d){v&&alert("Playlist process failed, ofm: "+wc);Ud()})}function Me(){Vd?isMobile?Ob?B.initVideo(oa):(p=!1,ad=!0,oc("on")): B.initVideo(oa):(dc=0==h.find("div[class='youtubeIframeMain']").length?e("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(h):h.find("div[class='youtubeIframeMain']"),B=e.youtubePlayer({autoPlay:Wd,defaultVolume:D,mediaPath:oa,youtubeHolder:dc,youtubeChromeless:!1,isMobile:isMobile,initialAutoplay:Ne,quality:null,protocol:Oe},f),e(B).on("ap_YoutubePlayer.YT_READY",function(){bd||dc.css("left","-10000px");Ta=!0}),e(B).on("ap_YoutubePlayer.START_PLAY",function(){ha&& clearInterval(ha);ha=setInterval(Pe,250);ad&&(B.stop(),B.initVideo(oa),ad=!1);!Ob&&isMobile&&(oc("off"),p=Ob=!0)}),e(B).on("ap_YoutubePlayer.END_PLAY",function(){Ac()}),e(B).on("ap_YoutubePlayer.STATE_PLAYING",function(){Bc()}),e(B).on("ap_YoutubePlayer.STATE_PAUSED",function(){isMobile?"iPhone"==yb||"iPod"==yb?G&&(G=!1,La("off")):Cc():Cc()}),Vd=!0);V=sc=!0}function oc(a){"on"==a?(bd=!0,dc.css({top:"0px",left:"0px"})):(dc.css("left","-10000px"),bd=null)}function Qe(){var a=F.substr(1);embedFlashMain(a); a=u.substr(1);embedFlashAudio(a);"undefined"!==typeof k(F)?Ga=setInterval(Re,100):(v&&alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+M),Xd())}function Re(){void 0!=k(F).setData&&(Ga&&clearInterval(Ga),k(F).setData(f),h.find(".flashMain").css("left","-10000px"),Xd())}function Xd(){"undefined"!==typeof k(u)?Ga=setInterval(Se,100):(v&&alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+ M),Yd())}function Te(){var a=u.substr(1);embedFlashAudio(a);var b=setTimeout(function(){b&&clearTimeout(b);"undefined"!==typeof k(u)?Ga=setInterval(Ue,100):(v&&alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+M),zb())},500)}function Se(){void 0!=k(u).setData&&(Ga&&clearInterval(Ga),k(u).setData(f),h.find(".flashAudio").css("left","-10000px"),Yd())}function Ue(){void 0!=k(u).setData&&(Ga&&clearInterval(Ga),k(u).setData(f),h.find(".flashAudio").css("left", "-10000px"),zb())}function Yd(){if(ca){var a=Z.substr(1);embedFlashCircle(a);"undefined"!==typeof k(Z)?Ga=setInterval(Ve,100):(v&&alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+M),zb())}else e(".circleMain").remove(),zb()}function Ve(){void 0!=k(Z).setData&&(Ga&&clearInterval(Ga),k(Z).setData(Ab),zb())}function k(a){"#"==a.charAt(0)&&(a=a.substr(1));return-1!=navigator.appName.indexOf("Microsoft")?window[a]: document[a]}function vc(a){if(J(cd))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),I.shift(),T(),!1;/\/favorites$/.test(a)&&(a=a.replace(/\/favorites$/,"/likes"));var b=We(a,cd);e.ajax({url:b,dataType:"jsonp",cache:!1}).done(function(b){var g,l;if(b.tracks){g=b.tracks.length;g>wa&&(g=wa);for(l=0;l<g;l++)b.tracks[l].streamable&&b.tracks[l].stream_url?y.push(dd(b.tracks[l])):(g+=1,g>b.tracks.length&&(g=b.tracks.length));y.length>wa&&(y=y.slice(0,wa));Wa()}else if(b.duration)b.permalink_url= a,b.streamable&&b.stream_url&&y.push(dd(b)),y.length>wa&&(y=y.slice(0,wa)),Wa();else if(b.username)/likes/.test(a)?(console.log("DATA.USERNAME.LIKES"),jb=b.uri+"/likes"):/favorites/.test(a)?(console.log("DATA.USERNAME.FAVOURITES"),jb=b.uri+"/favorites"):jb=b.uri+"/tracks",vc(jb);else if(e.isArray(b)){g=b.length;g>wa&&(g=wa);for(l=0;l<g;l++)b[l].streamable&&b[l].stream_url?y.push(dd(b[l])):(g+=1,g>b.length&&(g=b.length));g==Zd?(Zb+=Zd,Zb<wa?vc(jb):(y.length>wa&&(y=y.slice(0,wa)),Wa())):(y.length>wa&& (y=y.slice(0,wa)),Wa())}else b.kind&&"group"==b.kind?(jb=b.uri+"/tracks",vc(jb)):(I.shift(),T())}).fail(function(b,g,l){v&&alert("Playlist process failed, soundcloud: "+a);I.shift();T()})}function dd(a){var b={type:"soundcloud"};a.duration&&(b.length=a.duration);b.mp3=a.stream_url+(/\?/.test(a.stream_url)?"&":"?")+"consumer_key="+cd;b.ogg="";b.title=a.title;na&&(b.url=na);a.downloadable&&a.download_url?(O&&(b.dlink=O),U&&(b.download=U)):(O&&1!=O&&"true"!=O&&(b.dlink=O),U&&1!=U&&"true"!=U&&(b.download= U));a.artwork_url?b.thumb=a.artwork_url:ea&&(b.thumb=ea);return b}function We(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&offset="+Zb+"&consumer_key="+b+"&callback=?"}function Dd(){var a=y[cb].mp3+"?rand="+99999999*Math.random();ID3.loadTags(a,function(){var b=ID3.getAllTags(a);console.log(b);b.title&&(y[cb].title=b.title);b.artist&&(y[cb].artist=b.artist);b.album&&(y[cb].album=b.album);if(b=b.picture){var d="",g=0,l=b.data.length;for(g;g<l;g++)d+= String.fromCharCode(b.data[g]);y[cb].thumb="data:"+b.format+";base64,"+window.btoa(d)}cb++;cb<y.length?Dd():Wa()},{tags:["title","artist","album","picture"],onError:function(a){}})}function Pe(){if(X){var a=B.getCurrentTime(),b=B.getDuration();Ha=B.getVideoBytesLoaded()/B.getVideoBytesTotal();r(a)&&r(b)?(lc=!1,Ia.html(Jb(a)+kb),Ja.html(Kb(b)),ca)?za&&(r(Ha)&&Mb(Ha),ta=a/b,!fa&&G&&(Ec||sa(a/b))):(r(Ha)&&Ma.width(Ha*K),fa||ya.width(a/b*K)):lc=!0}}function $d(){var a=m.currentTime,b=m.duration;void 0!= m.buffered&&0!=m.buffered.length&&r(b)&&(Ha=m.buffered.end(0)/b);r(a)&&r(b)&&(Ia&&Ia.html(Jb(a)+kb),Ja&&Ja.html(Kb(b)));if(ca)za&&(r(Ha)&&Mb(Ha),r(a)&&r(b)&&(ta=a/b,!fa&&G&&sa(a/b)));else{if(r(Ha)){var d=Ha*K;d>K&&(d=K);Ma&&Ma.width(d)}r(a)&&r(b)&&!fa&&ya&&ya.width(a/b*K)}}function Ac(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(N,M,t.getCounter());Qa();t.advanceHandler(1,!0)}function Bc(){Nc||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(N,M,t.getCounter()), Nc=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(N,M,t.getCounter());ca&&za&&R()}function Cc(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(N,M,t.getCounter())}function Zc(){if("youtube"==aa)X?(Me(),isMobile&&!Ob&&da&&(p=!1,oc("on"))):("undefined"!==typeof k(F)&&(k(F).pb_play(oa,0,100,100,"youtube",da),V=!0),sc=Ta=!0);else if(P){if(!ae){var a="",a=Xe?a+'<audio class="hap_audio_cont" preload="auto">':a+'<audio class="hap_audio_cont" preload="none">';be.html(a+ "</audio>");Xb=be.find(".hap_audio_cont");m=Xb[0];m.volume=D;ae=!0}lb?m.src=oa:ec&&(m.src=xb);da&&(m.load(),m.play());Xb.on("ended",function(a){Ac()}).on("pause",function(a){Cc()}).on("play",function(a){ha&&clearInterval(ha);ha=setInterval($d,250);Bc()}).on("canplay",function(a){Ib&&(m.seekable&&0<m.seekable.length&&(m.currentTime=Ib*m.duration),Ib=null)}).on("canplaythrough",function(a){}).on("loadedmetadata",function(a){}).on("error",function(a){}).on("abort",function(a){}).on("stalled",function(a){}).on("suspend", function(a){});ha&&clearInterval(ha);ha=setInterval($d,250)}else"undefined"!==typeof k(u)&&k(u).pb_initAudio(oa);da?(G=!0,fb("off")):(G=!1,La("off"));A();"youtube"!=aa&&(V=!0);!isMobile&&da&&B&&B.setAutoPlay(!0);da=!0}function zb(){var a=[h.find(".controls_next"),h.find(".controls_prev"),h.find(".controls_toggle"),h.find(".player_volume"),h.find(".player_download"),h.find(".player_loop"),h.find(".player_shuffle")],b,d=a.length,g=0;for(g;g<d;g++)if(b=e(a[g]).css("cursor","pointer").on(ib,me),Ye&&!isMobile)b.on("mouseover", ne).on("mouseout",te);Ke();ub?vd(ub):p||Hd()}function Nd(){if(!ca&&(K=mc.width(),r(Ha)&&Ma&&Ma.width(Ha*K),!fa&&ya)){var a,b;if("youtube"!=aa){if(P)m&&(a=m.currentTime,b=m.duration);else if("undefined"!==typeof k(u))try{a=k(u).pb_getFlashPosition,b=k(u).pb_getFlashDuration()}catch(d){}try{a&&r(a)&&b&&r(b)&&ya.width(a/b*K)}catch(g){}}}Md&&!va&&Jc();Bb&&xa&&xa.checkSize()}function Pc(){ce.css("display","none")}function xd(){ce.css("display","block")}function td(){ha&&clearInterval(ha);Bb&&xa&&xa.deactivate(); nb.html(fc);Ia.html(ed+kb);Ja.html(fd);ca?za&&(ta=0,L.clearRect(0,0,la,ra),ab.clearRect(0,0,la,ra)):(ya.width(0),Ma.width(0));La("off");tc.css("display","none")}function Mc(){ha&&clearInterval(ha);hb||(Bb&&xa&&xa.deactivate(),nb.html(fc));Ia.html(ed+kb);Ja.html(fd);ca?za&&(ta=0,L.clearRect(0,0,la,ra),ab.clearRect(0,0,la,ra)):(ya.width(0),Ma.width(0));La("off");tc.css("display","none")}function La(a){"on"==a?h.find(".controls_toggle").find("img").attr("src",Ze):h.find(".controls_toggle").find("img").attr("src", $e);Fa&&Fa.hasClass("play_link")&&Fa.attr("src",zc);ca&&(za?(L.clearRect(0,0,la,ra),sa(ta),R()):"undefined"!==typeof k(Z)&&k(Z).pb_toggle_icon("play"))}function fb(a){"on"==a?h.find(".controls_toggle").find("img").attr("src",af):h.find(".controls_toggle").find("img").attr("src",bf);Fa&&Fa.hasClass("play_link")&&Sd.hasClass("hap_text_link")&&Fa.attr("src",Td);ca&&(za?(L.clearRect(0,0,la,ra),sa(ta),R()):"undefined"!==typeof k(Z)&&k(Z).pb_toggle_icon("pause"))}function r(a){return!isNaN(parseFloat(a))&& isFinite(a)}function Jb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Kb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Za(a){if("string"===typeof a){if(Vc&&t&&-1!=t.getCounter()){var b=t.getCounter();a=Wc(C[b].id)+Xc+a}}else{if("number"===typeof a){if(!t||0>a||a>H-1)return!1}else if(!t)return!1;b=t.getCounter(); a=Kc(b)}Bb&&xa?(xa.input(a),xa.activate()):nb&&nb.html(a)}function Kc(a,b){if("undefined"===typeof b||null===b)b=!0;return C[a]&&C[a].title&&!J(C[a].title)?b?Vc?Wc(C[a].id)+Xc+C[a].title:C[a].title:C[a].title:fc}function Wc(a){return 9>a?"0"+(a+1):a+1}function cf(a){var b=[],d=[],g=0;for(g;g<a;g++)b[g]=g;var g=0,l;for(g;g<a;g++)l=Math.round(Math.random()*(b.length-1)),d[g]=b[l],b.splice(l,1);return d}function df(a){var b=[],d=0;for(d;d<a;d++)b[d]=d;return b}function De(a,b,d){"title"==b?a.sort(function(a, b){return a.title==b.title?0:a.title<b.title?-1:1}):"type"==b&&a.sort(function(a,b){return a.type==b.type?0:a.type<b.type?-1:1});d&&a.reverse()}function J(a){return a?0==a.replace(/^\s+|\s+$/g,"").length:!0}function Ce(a){a=a.split(":");for(var b=0,d=1;0<a.length;)b+=d*parseInt(a.pop()),d*=60;return b}function Be(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available"); }function ef(a,b){return b-a}function xe(a){if("string"===typeof a)switch(a.toLowerCase()){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;default:return Boolean(a)}else if("boolean"===typeof a)return Boolean(a)}function ff(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function Ed(a){var b,d="",g,c="",f="",h="",k,n,p,m;b=a.type.toLowerCase();a.origtype&&(d=a.origtype.toLowerCase());a.mp3?g=a.mp3:a.path&&(g=a.path); a.ogg&&(c=a.ogg);a.title&&(f=a.title);a.thumb&&(h=a.thumb);a.download&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.download||"true"==a.download||J(a.download)||(k=a.download):k=1==a.download?g:a.download);a.url&&(p=a.url);a.dlink&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.dlink||"true"==a.dlink||J(a.dlink)||(n=a.dlink):n=1==a.dlink?g:a.dlink);"local"==b?"title"==Ya?m="<li class= 'playlistItem' data-type='local' data-origtype='"+d+"' data-mp3='"+ g+"' data-ogg='"+c+"' data-thumb='"+h+"' data-title='"+f+"'><a class='playlistNonSelected' href='#'>"+f+"</a></li>":"thumb"==Ya?m="<li class= 'playlistItem' data-type='local' data-origtype='"+d+"' data-mp3='"+g+"' data-ogg='"+c+"' data-thumb='"+h+"' data-title='"+f+"'><a class='playlistNonSelected' href='#'><img src='"+h+"' alt='thumb'/></a></li>":"all"==Ya&&(m="<li class= 'playlistItem' data-type='local' data-origtype='"+d+"' data-mp3='"+g+"' data-ogg='"+c+"' data-thumb='"+h+"' data-title='"+f+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+ h+"' alt='thumb'/></span><span class='hap_title'><p>'"+f+"'</p></span></a></li>"):(m="<li class= 'playlistItem' data-type='"+b+"' data-path='"+g+"' data-thumb='"+h+"'></li>","database_data"==b&&(g=a.table?a.table:null,d=a.limit?a.limit:null,a=a.range?a.range:null,g&&(g=' data-table="'+g+'" ',c=m.match(/\>/),m=m.slice(0,c.index)+g+m.slice(c.index)),d&&(g=' data-limit="'+d+'" ',c=m.match(/\>/),m=m.slice(0,c.index)+g+m.slice(c.index)),a&&(g=' data-range="'+a+'" ',c=m.match(/\>/),m=m.slice(0,c.index)+ g+m.slice(c.index))));k&&(g=' data-download="'+k+'" ',c=m.match(/\>/),m=m.slice(0,c.index)+g+m.slice(c.index));"local"==b?(n&&(g="<a class='dlink' href='#' data-dlink='"+n+"'><img src='"+Jd+"' alt='download'/></a>",c=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,c.index)+g+m.slice(c.index)),p&&(g="<a class='plink' href='"+p+"' target='_blank'><img src='"+Id+"' alt='purchase'/></a>",c=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,c.index)+g+m.slice(c.index))):(n&&(g=' data-dlink="'+n+'" ',c=m.match(/\>/),m=m.slice(0, c.index)+g+m.slice(c.index)),p&&(g=' data-plink="'+p+'" ',c=m.match(/\>/),m=m.slice(0,c.index)+g+m.slice(c.index)));b=document.createElement("ul");b.innerHTML=m;return e(b.firstChild)}function Sc(a){a=e(a);var b;a=e("<div>").append(a.clone()).html();b=document.createElement("ul");b.innerHTML=a;return e(b.firstChild)}function Cb(a){H=C.length;if(0<H){xc();var b=t.getCounter();a==b?(sd(),t.setPlaylistItems(H)):(t.setPlaylistItems(H,!1),a<b&&t.reSetCounter(t.getCounter()-1));hb&&Za()}else Ub(),ub=null, "undefined"!==typeof playlistEmpty&&playlistEmpty(N,M)}var p=!1,N=this;e("body");var Ld=e(window),Ra=e(document),Oe=e.inArray(window.location.protocol,["http:","https:"])?"http:":window.location.protocol,gd,Db=navigator.userAgent,yb;if(-1<Db.indexOf("iPhone")||-1<Db.indexOf("iPod")||-1<Db.indexOf("iPad"))-1<Db.indexOf("iPhone")?yb="iPhone":-1<Db.indexOf("iPod")?yb="iPod":-1<Db.indexOf("iPad")&&(yb="iPad");var je=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),gc=document.createElement("audio"), lb,ec,X=!1;gc.canPlayType?(X=!0,lb=!!gc.canPlayType&&""!=gc.canPlayType("audio/mpeg"),ec=!!gc.canPlayType&&""!=gc.canPlayType('audio/ogg; codecs="vorbis"')):(lb=!0,ec=!1);var ue=hap_source_path+f.buttonsUrl.prev,oe=hap_source_path+f.buttonsUrl.prevOn,ve=hap_source_path+f.buttonsUrl.next,pe=hap_source_path+f.buttonsUrl.nextOn,$e=hap_source_path+f.buttonsUrl.play,Ze=hap_source_path+f.buttonsUrl.playOn,bf=hap_source_path+f.buttonsUrl.pause,af=hap_source_path+f.buttonsUrl.pauseOn,pc=hap_source_path+f.buttonsUrl.loop, Rb=hap_source_path+f.buttonsUrl.loopOn,id=hap_source_path+f.buttonsUrl.volume,qe=hap_source_path+f.buttonsUrl.volumeOn,jd=hap_source_path+f.buttonsUrl.mute,re=hap_source_path+f.buttonsUrl.muteOn,qc=hap_source_path+f.buttonsUrl.shuffle,Sb=hap_source_path+f.buttonsUrl.shuffleOn,we=hap_source_path+f.buttonsUrl.download,se=hap_source_path+f.buttonsUrl.downloadOn,Id=hap_source_path+f.buttonsUrl.trackUrlIcon,Jd=hap_source_path+f.buttonsUrl.trackDownloadIcon,Ee=hap_source_path+f.buttonsUrl.trackRemoveIcon, Td=hap_source_path+f.buttonsUrl.link_pause,zc=hap_source_path+f.buttonsUrl.link_play,h=e(this).css("display","block"),ca=h.hasClass("hap_circle"),za=!1;X&&ff()&&(za=!0);var yd="html5audio-popup"==h.attr("id"),rb=h.find(".playlistHolder"),Pa=h.find(".playlist_inner").css("opacity",0);h.find(".playerHolder");h.find(".player_mediaTime");var Ia=h.find(".player_mediaTime_current"),Ja=h.find(".player_mediaTime_total"),ge=h.find(".player_mediaName_Mask"),nb=h.find(".player_mediaName");h.find(".player_controls"); var gf=h.find(".player_volume"),ce=h.find(".preloader"),tc=h.find(".player_download");h.find(".componentPlaylist");var bb=e(f.playlistList);yd&&window.opener&&(bb=window.opener.jQuery(f.playlistList));var Fd=new APHAPYTLoader(f);e(Fd).on("APHAPYTLoader.END_LOAD",function(a,b){var d,c=b.length,e;for(d=0;d<c;d++)e=b[d],e.description=e.description?e.description.replace(/["']/g,""):null,na&&(e.url=na),O&&(e.dlink=O),U&&(e.download=U),y.push(e);y.length>de&&(y=y.slice(0,de));Wa()});var M=f.sound_id,da= f.autoPlay,Ne=f.autoPlay,Wd=f.autoPlay,Xe=f.autoLoad;isMobile&&(da=!1,Wd=f.autoPlay=!1);var hf=f.useOnlyMp3Format,cd=f.soundcloudApiKey,wa=f.soundcloud_result_limit,Ae=f.podcast_result_limit,de=f.yt_playlist_result_limit,cc=f.ofm_result_limit,Bb=f.useSongNameScroll,hb=f.autoSetSongTitle,Ca=f.loopingOn,Da=f.randomPlay,kb=f.mediaTimeSeparator,md=f.seekTooltipSeparator,fc=f.defaultArtistData,Vc=f.useNumbersInPlaylist,Xc=f.titleSeparator,ub=f.activePlaylist,v=f.useAlertMessaging,Md=f.activatePlaylistScroll, Nb=f.playlistScrollOrientation.toLowerCase(),Ge=f.sortablePlaylistItems,He=f.autoReuseMailForDownload,Kd=f.useRemoveBtnInTracks,jf=f.useVolumeTooltip,kf=f.useSeekbarTooltip,Ya=f.playlistItemContent.toLowerCase(),lf=f.useKeyboardNavigation,Ye=f.useBtnRollovers,ud=f.usePlaylistRollovers,Cd=f.getTrackInfoFromID3;Ia.html("0:00");Ja.html("0:00");var ed=Ia.html(),fd=Ja.html();nb.html(fc);Ia.html(ed+kb);Ja.html(fd);var P=!0;if(!X||!lb&&hf)P=!1;var cb,gb,Ea,Wb,tb,sb,va=!1,zd="hap_processed",Ad="hap_draggable", Rc,na,Od,Yc,Ua,O,U,rc,ea,uc,Sd,Fa,Yb,Oc,Uc=!1;void 0!=rb.attr("data-playlistLocked")&&(Uc=!0);var Pb="playlist_locked",Vb=!1,ac,q,w=null,x=!0,lc=!1,Nc=!1,jb,Zb,Zd=50,aa,V=!1,oa="",xb="",G=!1,ha,Ha;Ca&&h.find(".player_loop").find("img").attr("src",Rb);Da&&h.find(".player_shuffle").find("img").attr("src",Sb);var C=[],Va=[],S=[],H=0,Y,wd,Bd=e('<div class="hap_feedParser"/>'),Ie=0==h.find("iframe[id='dl_iframe']").length?e('<iframe id="dl_iframe"/>').css({position:"absolute",left:"-10000px",display:"none"}).appendTo(h): h.find("iframe[id='dl_iframe']"),vb=e("<div/>"),Qc=e("<div/>");if(isMobile)var bc,Je=1E3,yc=0==rb.find("div[id='download_confirm']").length?e('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({opacity:0,zIndex:1E3}).appendTo(rb):rb.find("div[id='download_confirm']");var y=[],I=[],u=f.flashAudio,Z=f.circleMain;if(P)var ae=!1,Xb,m,be=e('<div class="hap_audioHolder"/>');var B,Vd=!1,dc,F=f.flashYoutube,Ga,sc=!1,Ta=!1,Ob=!1,bd,ad=!1,Xa=[],Tc,wc,wb,$c,xa;Bb&&c();var t=e.playlistManager({randomPlay:Da, loopingOn:Ca});e(t).on("ap_PlaylistManager.COUNTER_READY",function(){var a=t.getCounter(),b=C[a];b&&!Uc&&(rd(),hb&&Za(),aa=b.origtype?b.origtype:b.type,oa=b.mp3,xb=b.ogg,b.download?rc=!0:rc=null,Tb(),Zc(),"undefined"!==typeof itemTriggered&&itemTriggered(N,M,a))});e(t).on("ap_PlaylistManager.PLAYLIST_END",function(){rd();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(N,M);G=!1;La("off")});e(t).on("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&& audioPlayerPlaylistEnd(N,M)});var ib="",ob="",pb="",Ka;"ontouchstart"in window?(Ka=!0,ib="touchstart.ap",ob="touchmove.ap",pb="touchend.ap"):(Ka=!1,ib="mousedown.ap",ob="mousemove.ap",pb="mouseup.ap");var Gb=!1,Dc,hc=!1,D=f.defaultVolume;0>D&&(D=0);0==D?Dc=.5:1<D&&(D=1);var ka=h.find(".volume_seekbar").css("cursor","pointer").on(ib,function(a){ia(a);return hc=!1}),Fb="horizontal";void 0!=ka.attr("data-orientation")&&(Fb=ka.attr("data-orientation").toLowerCase());if(void 0!=ka.attr("data-autoHide")){var jc= function(){W&&clearTimeout(W);ka.css("display","none");Qb=!1},Gb=!0,Qb=!1,W,kc=parseInt(ka.attr("data-autoHide"),10);if(!isMobile)gf.on("mouseover",function(){if(!p)return!1;W&&clearTimeout(W);ka.css("display","block");Qb=!0;return!1}).on("mouseout",function(){if(!p)return!1;W&&clearTimeout(W);W=setTimeout(jc,kc);return!1})}var Eb=!1,ja=0,ic=h.find(".volume_level"),qb=h.find(".volume_bg");if(jf&&!isMobile){ka.on("mouseover",z);var Na=h.find(".player_volume_tooltip"),he=parseInt(Na.css("top"),10); Na.on("mouseenter",function(){ka.off("mouseover",z);Na.css("display","none")}).on("mouseleave",function(){ka.on("mouseover",z)})}else h.find(".player_volume_tooltip").remove();var db,Ib,fa=!1,mc=h.find(".progress_bg"),Ma=h.find(".load_progress"),ya=h.find(".play_progress"),$a=h.find(".player_progress"),K=mc.width(),Ec=!1;if(ca){var mb=h.find(".load_canvas").css("cursor","pointer"),hd=h.find(".play_canvas"),Oa=h.find(".circlePlayer"),ee=parseFloat(Oa.attr("data-offOpacity"),10),fe=parseFloat(Oa.attr("data-onOpacity"), 10);isMobile&&(ee=fe=1);var Ab={flash_id:f.flash_id,strokeSize:parseInt(Oa.attr("data-strokeSize"),10),play_color:hd.attr("data-bgcolor"),load_color:mb.attr("data-bgcolor"),tolerance:parseInt(Oa.attr("data-tolerance"),10),offOpacity:ee,onOpacity:fe,circleWidth:mb.width(),circleHeight:mb.height()};if(za){var Lb=Ab.strokeSize,Ic=Ab.play_color,ke=Ab.load_color,L=mb[0].getContext("2d"),ab=hd[0].getContext("2d"),nd=2*Math.PI,nc=Math.PI/2,la=Ab.circleWidth,ra=Ab.circleHeight,Hc=la/2,ld=Hc-Lb,ie=f.tolerance, kd,Gc=!1,ta=0;mb.on(ib,function(a){Gc=Fc(a)?!1:!0;ba(a);return!1});$a=mb}else mb.remove(),hd.remove()}else $a=h.find(".player_progress").css("cursor","pointer").on(ib,function(a){ba(a);return!1});if(kf&&!isMobile){$a.on("mouseover",Aa);var Ba=h.find(".player_progress_tooltip").css("zIndex",50);Ba.find("p").html("0:00"+md+"0:00");Ba.on("mouseenter",function(){$a.off("mouseover",Aa);Ba.css("display","none")}).on("mouseleave",function(){$a.on("mouseover",Aa)})}else h.find(".player_progress_tooltip").remove(); this.flashVideoPause=function(){La("off");G=!1;Cc()};this.flashVideoResume=function(){fb("off");G=!0;Bc()};this.flashVideoEnd=function(){Ac()};this.flashVideoStart=function(){fb("off");V=G=!0;Bc()};this.flashYoutubeData=function(a,b,d,c){ca?(r(a)&&r(b)&&"undefined"!==typeof k(Z)&&k(Z).pb_drawLoadbar(a/b),r(d)&&r(c)&&(ta=d/c,fa||"undefined"!==typeof k(Z)&&k(Z).pb_drawSeekbar(d/c))):(r(a)&&r(b)&&Ma&&Ma.width(a/b*K),r(d)&&r(c)&&ya&&ya.width(d/c*K));r(d)&&r(c)&&(Ia&&Ia.html(Jb(d)+kb),Ja&&Ja.html(Kb(c)))}; this.flashAudioData=function(a,b,d,c){a/=b;ca?za?(r(a)&&Mb(a),r(d)&&r(c)&&(ta=d/c,!fa&&G&&sa(d/c))):(null!==a&&"undefined"!==typeof k(Z)&&k(Z).pb_drawLoadbar(a),r(d)&&r(c)&&(ta=d/c,fa||"undefined"!==typeof k(Z)&&k(Z).pb_drawSeekbar(d/c))):(!fa&&ya&&ya.width(d/c*K),null!==a&&(a*=K,a>K&&(a=K),Ma&&Ma.width(a)),r(d)&&r(c)&&(Ia&&Ia.html(Jb(d)+kb),Ja&&Ja.html(Kb(c))))};this.flashAudioEnd=function(){Ac()};this.flashCircleToggle=function(a){Hb()};this.flashCircleOverLoader=function(a){Ba.css("display","block"); eb(a)};this.flashCircleOutLoader=function(){Ba.css("display","none")};this.flashCircleSeek=function(a){ua(a)};this.embedFlash=function(){if(X)f.useOnlyMp3Format&&!lb&&(a=u.substr(1),embedFlashAudio(a));else{var a=F.substr(1);embedFlashMain(a);a=u.substr(1);embedFlashAudio(a);ca&&(a=Z.substr(1),embedFlashCircle(a))}};lf&&Ra.keyup(function(a){if(!p||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.keyCode;37==a?N.previousAudio():39==a?N.nextAudio(): 32==a?N.toggleAudio():77==a&&(E(),A());return!1});Ld.resize(function(){if(!p||x)return!1;gd&&clearTimeout(gd);gd=setTimeout(Nd,150)});this.setPlayIcon=function(){Fa&&Fa.hasClass("play_link")&&Fa.attr("src",zc);G=!1};this.playAudio=function(){if(!p||x||!w||G||!V)return!1;if("youtube"==aa){if(!Ta)return!1;X?B.togglePlayback():"undefined"!==typeof k(F)&&k(F).pb_togglePlayback()}else P?m&&m.play():"undefined"!==typeof k(u)&&k(u).pb_play();fb("off");V=G=!0};this.pauseAudio=function(){if(!p||x||!w||!G|| !V)return!1;if("youtube"==aa){if(!Ta)return!1;X?B.togglePlayback():"undefined"!==typeof k(F)&&k(F).pb_togglePlayback()}else P?m&&m.pause():"undefined"!==typeof k(u)&&k(u).pb_pause();La("off");G=!1};this.toggleAudio=function(){if(!p||x||!w||!V)return!1;Hb()};this.stopAudio=function(){if(!p||x||!w||!V)return!1;if("youtube"==aa){if(!Ta)return!1;X?B.stop():"undefined"!==typeof k(F)&&k(F).pb_dispose()}else P?m&&(m.src="",lb?m.src=oa:ec&&(m.src=xb)):"undefined"!==typeof k(u)&&k(u).pb_dispose();Mc();G=!1}; this.checkAudio=function(a){if(!p||x||!w)return!1;a=a.toLowerCase();if(G){if("pause"==a)if("youtube"==aa){if(!Ta)return!1;X?B.togglePlayback():"undefined"!==typeof k(F)&&k(F).pb_togglePlayback()}else P?m&&m.pause():"undefined"!==typeof k(u)&&k(u).pb_pause();else if("stop"==a){if("youtube"==aa){if(!Ta)return!1;B.stop()}else P?m&&(m.src="",lb?m.src=oa:ec&&(m.src=xb)):"undefined"!==typeof k(u)&&k(u).pb_dispose();Mc()}G=!1;La("off")}};this.nextAudio=function(){if(!p||x||!w)return!1;Qa();t.advanceHandler(1, !0)};this.previousAudio=function(){if(!p||x||!w)return!1;Qa();t.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!p||x||!w)return!1;if("string"===typeof a){var b=0,d=!1;for(b;b<H;b++)if(a==C[b].title){a=b;d=!0;break}if(!d)return v&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===typeof a){if(0>a||a>H-1)return v&&alert('Invalid track number. Track number "'+a+'" doesnt exist. Load audio failed.'),!1}else return v&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."), !1;Qa();t.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!p||x)return!1;if("undefined"===typeof a)return v&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1;ub=a;vd(ub)};this.addTrack=function(a,b,d,c){if(!p||x)return!1;if("undefined"===typeof a)return v&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"===typeof b)return v&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof d)return v&& alert("addTrack method requires track parameter. AddTrack failed."),!1;var f=1,h=!1;if("string"!==typeof d&&"[object Object]"!==Object.prototype.toString.call(d))if("[object Array]"===Object.prototype.toString.call(d))f=d.length,h=!0;else return v&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;Ea=c;a=a.toLowerCase();"visible"==a?(w&&va&&Ub(),Wb=!0,va=!1):(w&&!va&&Ub(),va=tb=!0);gb=!1;if(w)if("undefined"!==typeof Ea){if(0>Ea||Ea>H)return v&&alert('Invalid position to insert track to. Position number "'+ c+'" doesnt exist. AddTrack failed.'),!1;Ea==H&&(gb=!0)}else gb=!0,Ea=H;else{if("undefined"!==typeof Ea){if(0!=Ea)return v&&alert('Invalid position to insert track to. Position number "'+c+'" doesnt exist. AddTrack failed.'),!1}else Ea=0;gb=!0}xd();x=!0;Vb=!1;c=0;var k;k="playlist"+Math.floor(9999*Math.random());var m=e("<ul id = "+k+"></ul>");b=b.toLowerCase();for(c;c<f;c++)k=h?d[c]:d,"html"==b?Sc(k).appendTo(m):(k.type&&k.mp3||k.path)&&Ed(k).appendTo(m);I=[];vb.empty();m.appendTo(vb).find("li[class='playlistItem']").each(function(){I.push(e(this))}); sb=!1;w||(sb=!0,w="visible"==a?Pa:Qc);T()};this.inputAudio=function(a){if(!p||x)return!1;if("undefined"===typeof a)return v&&alert("inputAudio method requires data parameter. inputAudio failed."),!1;if("undefined"===a.mp3)return v&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),!1;Qa();t.reSetCounter();oa=a.mp3;"undefined"!==a.ogg&&(xb=a.ogg);"undefined"!==a.title?Za(a.title):Za(fc);isMobile&&(da=!0,P||"undefined"!==typeof k(u)&&k(u).pb_setAutoplay(!0));Tb();Zc()};this.removeTrack= function(a){if(!p||x||!w)return!1;if("undefined"===typeof a)return v&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"===typeof a){var b=0,d=!1;for(b;b<H;b++)if(a==C[b].title){a=b;d=!0;break}if(!d)return v&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&C[a]?(S[a].remove(),C.splice(a,1),Cb(a)):v&&alert('RemoveTrack with name "'+a+'" failed.')}else if("number"===typeof a){if(0>a||a>H-1)return v&&alert('Invalid track number. Track number "'+ a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&C[a]?(S[a].remove(),C.splice(a,1),Cb(a)):v&&alert('RemoveTrack with name "'+a+'" failed.')}else if("[object Array]"===Object.prototype.toString.call(a))if("string"===typeof a[0]?b=!0:"number"===typeof a[0]&&(b=!1),b){var b=0,d=a.length,c,e,f;b;a:for(;b<d;b++)if(e=a[b],"string"===typeof e){f=0;c=C.length;if(0==c){Cb();break a}for(f;f<c;f++)if(e==C[f].title&&S[f]&&C[f]){S[f].remove();C.splice(f,1);Cb(f);break}}}else a:for(a.sort(ef),b=0,d=a.length,b;b< d;b++){if(e=a[b],"number"===typeof e){c=C.length;if(0==c){Cb();break a}-1<e&&e<c&&S[e]&&C[e]&&(S[e].remove(),C.splice(e,1),Cb(e))}}else return v&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1};this.destroyAudio=function(){if(!p||x||!w)return!1;sd()};this.destroyPlaylist=function(){if(!p||x||!w)return!1;Ub()};this.setTitle=function(a){if(!p||x||!w)return!1;Za(a)};this.toggleShuffle=function(){if(!p||x)return!1;Da?(h.find(".player_shuffle").find("img").attr("src", qc),Da=!1):(h.find(".player_shuffle").find("img").attr("src",Sb),Da=!0);t.setRandom(Da)};this.toggleLoop=function(){if(!p||x)return!1;Ca?(h.find(".player_loop").find("img").attr("src",pc),Ca=!1):(h.find(".player_loop").find("img").attr("src",Rb),Ca=!0);t.setLooping(Ca)};this.setVolume=function(a){if(!p||x)return!1;0>a?a=0:1<a&&(a=1);D=a;A()};this.getVolume=function(){return p?D:!1};this.setAutoPlay=function(a){if(!p)return!1;da=a;P||"undefined"!==typeof k(u)&&k(u).pb_setAutoplay(a)};this.getAutoPlay= function(){return p?da:!1};this.getIsMobile=function(){return isMobile};this.getMobileType=function(){return yb};this.getSetupDone=function(){return p};this.getPlaylistLoaded=function(){return Vb};this.getPlaylistTransition=function(){return x};this.getMediaPlaying=function(){return!p||x?!1:G};this.getAudioInited=function(){return!p||x?!1:V};this.getMediaType=function(){return!p||x?!1:aa};this.getActiveItem=function(){return!p||x?!1:t.getCounter()};this.getPlaylistItems=function(a){if(!p||x||!S|| 0==S.length)return!1;if("string"===typeof a)return S;if("number"===typeof a)return 0>num||num>H-1||!S[num]?!1:S[num]};this.getMediaCount=function(){return!p||x?!1:r(H)?H:0};this.getPlaylistHidden=function(){return!p||x?!1:va};this.get_hidden_playlist_holder=function(){return p?Qc:!1};this.getPlaylistList=function(){return p&&bb&&0!=bb.length?bb:!1};this.orderPlaylist=function(a,b){if(!p||!w)return!1;if("undefined"===typeof a)return v&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."), !1;var d=w.children("li"),c=d.length;if(0==c)return!1;var f=a.toLowerCase();if("reverse"==f)w.append(d.get().reverse());else if("random"==f||"remap"==f||"swap"==f){if("random"==f)b=cf(c);else if("remap"==f){if("undefined"===typeof b||b.length!=c)return!1}else if("swap"==f){if("undefined"===typeof b||2!=b.length)return!1;d=df(c);d.splice(b[1],1,b[0]);d.splice(b[0],1,b[1]);b=e.extend(!0,[],d)}else return!1;orderedItems=jQuery.map(b,function(a){return jQuery(S).get(a)});w.empty().html(orderedItems)}else return v&& alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;xc();if(d=Pa.find("a[class=playlistSelected]").attr("data-id"))t.reSetCounter(d),hb&&Za()};this.checkScroll=function(){if(!p||x||!w)return!1;Jc()};this.reinitScroll=function(){if(!p||x||!w)return!1;Y&&(Y.reinitialise(),"vertical"==Nb?(Y.scrollToY(0),e(".jspPane").css("top","0px")):(Y.scrollToX(0),e(".jspPane").css("left","0px")));Bb&&xa&&t&&-1!=t.getCounter()&&hb&&Za()};this.getPlaylistData=function(){return p&&!x&& w?C:!1};this.getSoundId=function(){return p?M:!1};this.getTouch=function(){return p?Ka:!1};this.get_hap_source_path=function(){return p?hap_source_path:!1};X?(e(".flashMain").remove(),e(".circleMain").remove(),P?(e(".flashAudio").remove(),zb()):Te()):Qe();return this}})(jQuery); (function(e){e.APHAPYTLoader=function(f){function c(){if(Q.length){n=Q.shift();z=n.type;var c=n.path;ga=[];Sa=0;ma=1;eb=n.limit?n.limit:200;sa=n.order?n.order:"relevance";if("youtube_single"==z||"youtube_single_list"==z)c="https://www.googleapis.com/youtube/v3/videos?id="+c+"&key="+R+"&part=snippet,contentDetails,statistics,status";else if(-1==A.inArray(sa,Mb)&&(sa="relevance"),"youtube_playlist"==z)c="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+ c+"&key="+R+"";else if("youtube_video_query"==z)c="https://www.googleapis.com/youtube/v3/search?part=id,snippet&maxResults=50&order="+sa+"&q="+(n.query||n.path)+"&key="+R+"";else if("youtube_user_channels"==z)c="https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername="+c+"&key="+R+"";else if("youtube_channel"==z)c="https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id="+c+"&key="+R+"";else{alert("Wrong youtube type V3!");return}ia(c)}else A(E).trigger("APHAPYTLoader.END_LOAD", [ba])}function ia(e){A.ajax({url:e,dataType:"jsonp"}).done(function(e){e.error&&e.error.message&&alert(e.error.message);var f,A=e.items.length;A+Sa>eb&&(A=eb-Sa);for(f=0;f<A;f++)if(_item=e.items[f])"youtube_playlist"==z||"youtube_single"==z||"youtube_single_list"==z?("private"!=_item.status.privacyStatus&&ba.push(pa(_item,z)),Sa++):"youtube_video_query"==z?(ba.push(pa(_item,z)),Sa++):"youtube_user_channels"!=z&&"youtube_channel"!=z||ga.push(_item.contentDetails.relatedPlaylists.uploads);if("youtube_single"== z||"youtube_single_list"==z)c();else if("youtube_user_channels"!=z&&"youtube_channel"!=z)if(ma+=50,ma<eb)if(ma<=e.pageInfo.totalResults&&e.nextPageToken){f=n.path;if("youtube_playlist"==z)var E="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+e.nextPageToken+"&part=snippet,status,contentDetails&maxResults=50&playlistId="+f+"&key="+R+"";else"youtube_video_query"==z&&(E="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&maxResults=50&order="+ sa+"&q="+f+"&key="+R+"");ia(E)}else c();else Aa&&(qa++,qa<ga.length?(ma=0,ua=ga[qa],E="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+ua+"&key="+R+"",ia(E)):(Aa=!1,c())),c();else ga.length?(1<ga.length&&(Aa=!0),ua=ga[qa],E="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+ua+"&key="+R+"",z="youtube_playlist",ia(E)):c()}).fail(function(e,f,n){alert("There was an error retrieveing youtube data: "+ e.responseText);c()})}function pa(c,e){var f=jQuery.extend(!0,{},n);f.deeplink&&"youtube_single"!=f.type&&(f.deeplink+=(Sa+1).toString());f.data=c;f.type="youtube";f.origtype=e;"youtube_single"==e||"youtube_single_list"==e?f.id=c.id:"youtube_playlist"==e?f.id=c.contentDetails.videoId:"youtube_video_query"==e&&(f.id=c.id.videoId);f.title||(f.title=c.snippet.title?c.snippet.title:null);f.description||(f.description=c.snippet.description?c.snippet.description:null);!f.thumb&&c.snippet.thumbnails?c.snippet.thumbnails.medium? f.thumb=c.snippet.thumbnails.medium.url:c.snippet.thumbnails.standard&&(f.thumb=c.snippet.thumbnails.standard.url):default_artwork&&(f.thumb=default_artwork);f.mp3=f.id;f.ogg="";return f}var E=this,A=jQuery.noConflict(),z,n,Q=[],ba=[],ga=[],qa=0,ua,Aa,ma,Sa,eb,sa,Mb="date rating relevance title videoCount viewCount".split(" "),R=f.ytAppId;A.inArray(e.location.protocol,["http:","https:"]);this.setData=function(e){R&&""!=R?(ba=[],Q=A.extend(!0,[],[e]),c()):alert("Youtube APMBI key missing! Please set APMBI key in player settings.")}}})(window); (function(e){function f(c,f){function pa(c){n.playerReady=!0;n.forcePreviewStop||(e(n).trigger("ap_YoutubePlayer.YT_READY"),"undefined"!==typeof n._player.setVolume&&n._player.setVolume(100*n._defaultVolume),n._autoPlay&&n._player.playVideo())}function E(c){e(n).trigger("ap_YoutubePlayer.QUALITY_CHANGE",[c.data])}function A(c){if(n.forceMainStop&&(n.forceMainStop=!1,"undefined"!==typeof n._player.stopVideo)){n._player.stopVideo();e(n).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");return}-1!=c.data&& (0==c.data?(e(n).trigger("ap_YoutubePlayer.END_PLAY"),n.loop&&n._player.playVideo()):1==c.data?(n.forcePreviewStop&&"undefined"!==typeof n._player.stopVideo&&n._player.stopVideo(),n._autoPlay=!0,n.small_embed&&"undefined"!==typeof n._player.setVolume&&n._player.setVolume(100*n._defaultVolume),n._inited||(e(n).trigger("ap_YoutubePlayer.START_PLAY"),n._inited=!0,!n.small_embed&&n.quality?n._player.setPlaybackQuality(n.quality):n.small_embed&&n._player.setPlaybackQuality(n._player.getAvailableQualityLevels()[n._player.getAvailableQualityLevels().length- 1])),e(n).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==c.data?e(n).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==c.data&&e(n).trigger("ap_YoutubePlayer.STATE_CUED"))}function z(c){e(n).trigger("ap_YoutubePlayer.ERROR_HANDLER",[c.data])}var n=this;this.isIE=c.isIE?c.isIE:!1;this.isMobile=c.isMobile;this.initialAutoplay=c.initialAutoplay;this._inited=!1;this._player;this._autoPlay=c.autoPlay;this._defaultVolume=c.defaultVolume;this._youtubeHolder=c.youtubeHolder;this._frameId="ytplayer"+Math.floor(16777215* Math.random());c.quality&&(this.quality=c.quality);c.small_embed&&(this.small_embed=c.small_embed);c.loop&&(this.loop=c.loop);this.lastID;this.playerReadyInterval=100;this.playerReadyIntervalID;this.playerReady=!1;this.protocol=c.protocol;0==c.youtubeChromeless&&(f.useControls=!0,f.ytShowinfo=!0);var Q="?controls="+(f.useControls?1:0).toString(),ba="&amp;autohide="+(f.autoHideControls?1:0).toString(),ga="&amp;showinfo="+(f.ytShowinfo?1:0).toString(),qa="&amp;modestbranding="+(f.ytModestbranding?1: 0).toString(),ua="&amp;rel="+(f.ytRel?1:0).toString(),Aa="&amp;theme="+(f.ytTheme?f.ytTheme:"dark");this.forcePreviewStop=this.forceMainStop=!1;this.youtubeVideoIframe=e("<iframe />",{frameborder:0,src:"https://www.youtube.com/embed/"+c.mediaPath+Q+ua+ga+ba+"&amp;enablejsapi=1"+Aa+qa+"&amp;wmode=transparent",width:"100%",height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe);Q=document.createElement("script"); Q.src=this.protocol+"//www.youtube.com/iframe_api";ba=document.getElementsByTagName("script")[0];ba.parentNode.insertBefore(Q,ba);var ma=setInterval(function(){window.YT&&window.YT.Player&&(ma&&clearInterval(ma),n._player=new YT.Player(n._frameId,{events:{onReady:pa,onPlaybackQualityChange:E,onStateChange:A,onError:z}}))},100);window.onYouTubeIframeAPIReady=function(){}}e.youtubePlayer=function(c,e){return new f(c,e)};f.prototype={clean:function(c){this._player&&("undefined"!==typeof this._player.stopVideo&& this._player.stopVideo(),this._player=null);this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null);this._youtubeHolder&&this._youtubeHolder.empty().css("display","none")},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(c,f){this.forcePreviewStop=this.forceMainStop=!1;this.quality=f;if(this.playerReady)this._player&&(this._inited=!1,this._autoPlay?"undefined"!==typeof this._player.loadVideoById&&this._player.loadVideoById(c): "undefined"!==typeof this._player.cueVideoById&&this._player.cueVideoById(c));else{var e=this;this.lastID=c;this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){e.playerReady&&(e.playerReadyIntervalID&&clearInterval(e.playerReadyIntervalID),e.forceMainStop||e.initVideo(e.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0;this._player&&"undefined"!==typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!== typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&&"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(c){if(this._player)if(void 0==c){if("undefined"===typeof this._player.getPlayerState)return!1;c=this._player.getPlayerState();1==c?"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo():2==c?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():-1!=c&&5!=c&&0!=c||"undefined"===typeof this._player.playVideo|| this._player.playVideo()}else c?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(c){this._player&&"undefined"!==typeof this._player.seekTo&&this._player.seekTo(c)},isMuted:function(){if(this._player&&"undefined"!==typeof this._player.isMuted)return this._player.isMuted()},getDuration:function(){if(this._player&&"undefined"!==typeof this._player.getDuration)return this._player.getDuration()}, getCurrentTime:function(){if(this._player&&"undefined"!==typeof this._player.getCurrentTime)return this._player.getCurrentTime()},getVideoLoadedFraction:function(){if(this._player&&"undefined"!==typeof this._player.getVideoLoadedFraction)return this._player.getVideoLoadedFraction()},getVideoBytesLoaded:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesLoaded)return this._player.getVideoBytesLoaded()},getVideoBytesTotal:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesTotal)return this._player.getVideoBytesTotal()}, setVolume:function(c){0>c?vol=0:1<c&&(c=1);this._player&&"undefined"!==typeof this._player.setVolume&&this._player.setVolume(100*c)},getPlayerState:function(){if(this._player&&"undefined"!==typeof this._player.getPlayerState)return this._player.getPlayerState()},setAutoPlay:function(c){this._autoPlay=c},getQualityLevels:function(){return this._player.getAvailableQualityLevels()},getCurrQuality:function(){return this._player.getPlaybackQuality()},setPlaybackQuality:function(c){this._player.setPlaybackQuality(c)}}})(jQuery); (function(e){function f(c){this._loopingOn=c.loopingOn;this._randomPlay=c.randomPlay;this._playlistItems;this._lastInOrder=!1;this._counter=-1;this._lastPlayedFromPlaylistClick;this._lastRandomCounter;this._randomPaused=!1;this._randomArr=[];this._playlistSelect=!1}e.playlistManager=function(c){return new f(c)};f.prototype={setCounter:function(c,e){"undefined"===typeof e&&(e=!0);this._counter=e?this._counter+parseInt(c,10):parseInt(c,10);this._checkCounter()},getCounter:function(){return this._randomPlay? this._playlistSelect?this._counter:this._randomArr[this._counter]:this._counter},advanceHandler:function(c){this._playlistSelect=!1;this._randomPaused?this._handleRandomPaused(c):this.setCounter(c)},processPlaylistRequest:function(c){this._playlistSelect=!1;this._randomPlay&&(this._playlistSelect=!0,this._lastPlayedFromPlaylistClick=c,this._randomPaused||(this._lastRandomCounter=this._counter,this._randomPaused=!0));this.setCounter(c,!1)},getLastInOrder:function(){return this._lastInOrder},getRandomPaused:function(){return this._randomPaused}, setPlaylistItems:function(c,e){"undefined"===typeof e&&(e=!0);e&&(this._counter=-1);this._playlistItems=c;this._randomPlay&&this._makeRandomList()},reSetCounter:function(c){"undefined"===typeof c?this._counter=-1:(c=parseInt(c,10),this._playlistItems?(c>this._playlistItems-1?c=this._playlistItems-1:0>c&&(c=0),this._counter=c):this._counter=-1)},setRandom:function(c){(this._randomPlay=c)&&this._makeRandomList();this._randomChange()},setLooping:function(c){this._loopingOn=c},_handleRandomPaused:function(c){var f= e(this);this._randomPaused=!1;this._lastRandomCounter+c>this._playlistItems-1?(this._counter=this._playlistItems-1,f.trigger("ap_PlaylistManager.COUNTER_READY")):0>this._lastRandomCounter+c?(this._counter=0,f.trigger("ap_PlaylistManager.COUNTER_READY")):this.setCounter(this._lastRandomCounter+c,!1)},_randomChange:function(){this._randomPlay?(this._activeIndexFirst(),this._counter=0):this._randomPaused?(this._counter=this._lastPlayedFromPlaylistClick,this._randomPaused=!1):this._counter=this._randomArr[this._counter]}, _checkCounter:function(){if(isNaN(this._counter))alert("ap_PlaylistManager message: No active media, counter = "+this._counter);else{var c=e(this);this._lastInOrder=!1;this._loopingOn?(this._randomPlay?this._counter>this._playlistItems-1?(this._counter=this._randomArr[this._playlistItems-1],this._makeRandomList(),this._firstIndexCheck(),this._counter=0,c.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._randomArr[0],this._makeRandomList(),this._lastIndexCheck(),this._counter= this._playlistItems-1):this._counter>this._playlistItems-1?(this._counter=0,c.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._playlistItems-1),c.trigger("ap_PlaylistManager.COUNTER_READY")):(this._counter>this._playlistItems-1?(this._counter=this._playlistItems-1,this._lastInOrder=!0):0>this._counter&&(this._counter=0),this._lastInOrder?c.trigger("ap_PlaylistManager.PLAYLIST_END"):c.trigger("ap_PlaylistManager.COUNTER_READY"))}},_makeRandomList:function(){3>this._playlistItems|| (this._randomArr=this._randomiseIndex(this._playlistItems))},_firstIndexCheck:function(){if(this._randomArr[0]==this._counter){var c=this._randomArr.splice(0,1);this._randomArr.push(c)}},_lastIndexCheck:function(){if(this._randomArr[this._playlistItems-1]==this._counter){var c=this._randomArr.splice(this._playlistItems-1,1);this._randomArr.unshift(c)}},_activeIndexFirst:function(){var c,e=this._randomArr.length;for(c=0;c<e;c++)if(this._randomArr[c]==this._counter){if(0==c)break;c=this._randomArr.splice(c, 1);this._randomArr.unshift(parseInt(c,10));break}},_randomiseIndex:function(c){var e=[],f=[],E;for(E=0;E<c;E++)e[E]=E;var A;for(E=0;E<c;E++)A=Math.round(Math.random()*(e.length-1)),f[E]=e[A],e.splice(A,1);return f}}})(jQuery); (function(e){apTextScroller=function(){function e(){"left"==z&&(Q-=ia,c.css("left",Q+"px"),parseInt(c.css("left"),10)<-A&&(Q=-ia))}var c,ia,pa,E,A,z,n,Q=0,ba,ga,qa,ua,Aa=!1;this.init=function(e,f,n,A,Q,R){ba=e;c=f;pa=n;z=A;E=Q;ia=R};this.input=function(e){ga=e;ba.html(e);qa=ba.width();var f=e.replace(/\s/g,"&nbsp;")+E;c.html("");c.css("width","auto");c.html(f);A=c.width();if(0!=A){e=f;if(A<=2*pa.width()){for(var n=Math.floor(2*pa.width()/A),z=0;z<n;z++)e+=f;f=A*(n+1)}else e+=f,f=2*A;c.html(e);c.css("width", f+1+"px");ua=e;Aa=!0}};this.inputSingle=function(c){};this.activate=function(){this.deactivate();pa.width()>=qa?c.html(ga):(c.html(ua),n=setInterval(e,100))};this.deactivate=function(){n&&clearInterval(n);"left"==z&&(c.css("left","0px"),Q=0)};this.checkSize=function(){Aa&&(pa.width()>=qa?(this.deactivate(),c.html(ga)):(c.html(ua),this.activate()))}}})(jQuery);